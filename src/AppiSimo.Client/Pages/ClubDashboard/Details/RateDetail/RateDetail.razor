@using System.Globalization
@inherits RateDetailComponent

@page "/club-dashboard/rates/create"
@page "/club-dashboard/rates/edit/{id:guid}"

<EditForm Model="@ViewModel" OnValidSubmit="@(async () => await HandleValidSubmit())">

    <DataAnnotationsCalidator></DataAnnotationsCalidator>
    <ValidationSummary></ValidationSummary>

    <InputLocalDate @bind-Value="@ViewModel.StartDate"></InputLocalDate>
    <InputLocalDate @bind-Value="@ViewModel.EndDate"></InputLocalDate>

    <button type="button" onclick="@Add">+++</button>

    @foreach (var dailyRateViewModel in ViewModel.DailyRatesViewModel)
    {
        <InputLocalTime @bind-Value="@dailyRateViewModel.Start"></InputLocalTime>
        <InputLocalTime @bind-Value="@dailyRateViewModel.End"></InputLocalTime>
        <InputNumber @bind-Value="@dailyRateViewModel.Price"></InputNumber>
                                                            
        <button type="button" onclick="@(() => Remove(dailyRateViewModel.Entity.Id))">---</button>
    }

    <button type="submit">Submit</button>

    <InputSelectT @bind-Value="@Selected">
    
        <option value="">Selezionare un riscaldamento ...</option>
    
        @foreach (var heats in GetStepsFromMidnight())
        {
            <option value="@Converter.LocalTime.FormatValueAsString(heats)">@Converter.LocalTime.FormatValueAsString(heats)</option>
        }
    
    </InputSelectT>

</EditForm>

<h2>sep</h2>
@Selected


